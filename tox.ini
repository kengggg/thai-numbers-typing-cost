[tox]
envlist = py39, py311, py312, format, lint
isolated_build = true
skip_missing_interpreters = true

[testenv]
# Base test environment configuration
deps =
    -r{toxinidir}/requirements-test.txt
commands =
    pytest {posargs}
setenv =
    PYTHONPATH = {toxinidir}/src

[testenv:py{39,311,312}]
# Python version-specific test environments
description = Run tests with Python {basepython}
commands =
    pytest {posargs}

[testenv:format]
# Code formatting with black and isort (check only)
deps =
    black>=23.0.0
    isort>=5.12.0
commands =
    isort --profile black --check-only --diff src tests
    black --check --diff src tests
description = Check code formatting (black + isort)

[testenv:format-fix]
# Auto-fix code formatting
deps =
    black>=23.0.0
    isort>=5.12.0
commands =
    isort --profile black src tests
    black src tests
description = Auto-fix code formatting (black + isort)

[testenv:lint]
# Basic code linting with flake8
deps =
    flake8>=6.0.0
    flake8-import-order>=0.18.0
commands =
    flake8 src tests
description = Run basic code linting (flake8)